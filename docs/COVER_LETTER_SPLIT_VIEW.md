# 자기소개서 작성 Split View UI

## 개요

자기소개서 작성 시 공고 분석 결과를 참고하면서 작성할 수 있도록 Split View UI를 구현했습니다.

## 주요 기능

### 1. 공고 선택 페이지 (`/cover-letters/select-posting`)

자기소개서 작성 전 단계로, 분석된 공고를 선택하는 페이지입니다.

**기능:**
- 분석 완료된 공고만 필터링하여 표시
- 각 공고 카드에 회사명, 제목, 키워드 미리보기 표시
- 공고 선택 시 `?jobPostingId={id}` 파라미터와 함께 작성 페이지로 이동
- "새로운 공고 분석하기" 버튼으로 공고 업로드 페이지 접근

**UI 특징:**
- 카드 호버 시 체크 아이콘 표시
- 키워드 태그 미리보기 (최대 6개)
- 분석 날짜 표시
- 공고가 없을 때 안내 메시지 및 첫 공고 업로드 유도

### 2. 자기소개서 작성 페이지 - Split View (`/cover-letters/create?jobPostingId={id}`)

#### 레이아웃

```
┌────────────────────────────────────────────────────────────┐
│  헤더 (공고 정보, 공고 변경 버튼)                                  │
├─────────────────────┬──────────────────────────────────────┤
│                     │                                      │
│  왼쪽 패널 (40%)     │   오른쪽 패널 (60%)                   │
│  📋 공고 분석 결과    │   ✍️ 자기소개서 작성                  │
│                     │                                      │
│  - 요약             │   - 텍스트 에디터                      │
│  - 핵심 키워드       │   - 글자 수 카운터                    │
│  - 필수 요건         │   - 작성 팁                          │
│  - 우대 사항         │   - AI 피드백 받기 버튼                │
│  - 작성 팁          │                                      │
│                     │                                      │
│  (스크롤 가능)       │   (스크롤 가능)                       │
│                     │                                      │
└─────────────────────┴──────────────────────────────────────┘
```

#### 왼쪽 패널: 공고 분석 결과 (참고용)

- **고정 표시**: 스크롤 시에도 항상 참고 가능
- **컴팩트 디자인**: 필요한 정보만 간결하게 표시
- **색상 구분**: 
  - 요약: 파란색
  - 필수 요건: 빨간색
  - 우대 사항: 파란색
  - 작성 팁: 노란색

**표시 정보:**
1. 📝 요약 - 공고의 핵심 내용
2. 🏷️ 핵심 키워드 - 태그 형태로 표시
3. ⭐ 필수 요건 - 반드시 언급해야 할 사항
4. ✨ 우대 사항 - 추가로 어필할 수 있는 사항
5. 💡 작성 팁 - STAR 기법, 키워드 활용 등

#### 오른쪽 패널: 자기소개서 작성

- **전체 화면 활용**: 넓은 작성 영역 제공
- **실시간 글자 수**: 하단에 현재 글자 수와 권장 글자 수 표시
- **작성 가이드**: placeholder에 작성 팁 포함
- **제출 버튼**: 하단 고정, 항상 접근 가능

### 3. 공고 ID 없이 접근 시

공고를 선택하지 않고 작성 페이지에 접근하면 안내 화면이 표시됩니다.

**UI 요소:**
- 아이콘 중심 디자인
- "분석된 공고 선택하기" 주요 버튼 (Primary CTA)
- "새 공고 업로드 및 분석" 보조 버튼 (Secondary CTA)
- 구분선으로 명확한 옵션 구분

## 사용 흐름

### 정상 흐름

```
1. 대시보드에서 "자기소개서 작성" 클릭
   ↓
2. /cover-letters/select-posting (공고 선택 페이지)
   - 분석된 공고 목록 확인
   - 공고 선택 또는 새 공고 분석
   ↓
3. /cover-letters/create?jobPostingId=1 (작성 페이지)
   - Split View로 공고 분석 결과 참고
   - 자기소개서 작성
   - AI 피드백 요청
   ↓
4. 피드백 결과 확인
   - 종합 평가, 강점, 약점
   - 상세 분석, 수정 예시
   - 예상 면접 질문
```

### 직접 URL 접근

```
/cover-letters/create (공고 ID 없음)
   ↓
안내 화면 표시
   - 공고 선택 페이지로 이동 유도
   - 또는 새 공고 업로드 유도
```

## 기술적 특징

### 반응형 디자인

- **데스크톱**: Split View (40% / 60% 비율)
- **태블릿**: 필요 시 수직 레이아웃으로 전환 가능
- **모바일**: 탭 또는 아코디언 형태로 전환 가능 (향후 개선)

### 성능 최적화

- **조건부 렌더링**: 공고 정보가 있을 때만 Split View 표시
- **메모이제이션**: `useCallback`으로 공고 로드 함수 최적화
- **지연 로딩**: 공고 분석 결과만 필요 시 로드

### 사용자 경험

- **명확한 내비게이션**: 각 단계마다 뒤로 가기 버튼
- **시각적 피드백**: 호버 효과, 로딩 상태, 에러 메시지
- **작성 가이드**: placeholder, 작성 팁, 권장 글자 수
- **공고 변경 용이**: 헤더에 공고 변경 버튼 배치

## 코드 구조

### 주요 파일

```
app/
├── cover-letters/
│   ├── select-posting/
│   │   └── page.tsx          # 공고 선택 페이지
│   └── create/
│       └── page.tsx           # 자기소개서 작성 페이지 (Split View)
```

### 상태 관리

```typescript
// 공고 정보
const [jobPosting, setJobPosting] = useState<JobPosting | null>(null);

// 작성 내용
const [contentText, setContentText] = useState('');

// 피드백 결과
const [feedback, setFeedback] = useState<any>(null);

// UI 상태
const [isLoading, setIsLoading] = useState(true);
const [isSubmitting, setIsSubmitting] = useState(false);
const [error, setError] = useState('');
```

### API 호출

```typescript
// 공고 정보 로드
const result = await apiClient.getJobPosting(parseInt(jobPostingId));

// 자기소개서 제출 및 피드백 생성
const result = await apiClient.createCoverLetter({
  jobPostingId: parseInt(jobPostingId),
  contentText,
});
```

## 향후 개선 사항

- [ ] 모바일 반응형 개선 (탭 UI)
- [ ] 자동 저장 기능
- [ ] 버전 관리 (여러 버전 작성)
- [ ] 실시간 AI 제안 (작성 중 키워드 하이라이트)
- [ ] 다크/라이트 모드 토글
- [ ] 공고 비교 기능 (여러 공고 동시 참고)
- [ ] PDF 내보내기
- [ ] 템플릿 기능

## 참고

- Split View는 1800px 이상의 화면에서 최적화되어 있습니다
- 공고 분석 결과가 없으면 왼쪽 패널에 안내 메시지가 표시됩니다
- 피드백 결과 화면은 중앙 정렬 레이아웃으로 변경됩니다

